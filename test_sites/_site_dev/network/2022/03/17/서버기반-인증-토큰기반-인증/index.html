<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>서버기반 인증, 토큰기반 인증</title>
    
    <!-- Prism.js CSS 먼저 로드 -->
    <link rel="stylesheet" href="/assets/css/prism/prism-material-theme.css">
    <link rel="stylesheet" href="/assets/css/prism/prism-toolbar.min.css">
    <link rel="stylesheet" href="/assets/css/prism/prism-line-numbers.min.css">

    <!-- 사이트 CSS -->
    <link rel="stylesheet" href="/assets/css/style.css">

    <!-- Ninja Keys CSS -->
    <script type="module" src="https://unpkg.com/ninja-keys?module"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1><a href="/">My Tech Blog</a></h1>
            <nav>
                <ul>
                    <li><a href="/">Home</a></li>
                </ul>
            </nav>
        </header>

        <main>
            <article class="post">
    <header class="post-header">
        <h1 class="post-title">서버기반 인증, 토큰기반 인증</h1>
        
        <!-- Enhanced metadata using post-metadata component -->
        <post-metadata 
          layout="inline"
          categories='["network"]'
          tags='["web","TIL"]'
          date="March 17, 2022"
          reading-time="2"
          compact="false">
        </post-metadata>
        
        
        <div class="post-author">
          <span class="author-label">작성자:</span>
          <span class="author-name">jeongcool</span>
        </div>
        
    </header>

    <div class="post-content">
        <h1 id="서버기반-인증-토큰기반-인증">서버기반 인증, 토큰기반 인증</h1>
<blockquote>
  <p>이글은 토큰기반의 인증을 왜 사용하느냐에 중점을 두어서 작성했습니다.</p>
</blockquote>

<h2 id="서버-기반의-인증">서버 기반의 인증</h2>
<p>: 클라이언트로부터 요청을 받으면, 클라이언트의 상태를 계속해서 유지하고 이 정보를 서비스에 이용하는 <strong>Sateful 서버</strong></p>
<ul>
  <li>세션을 기반으로 정보저장(메모리, DB를 이용해 정보 저장)</li>
</ul>

<p>&lt;img width=40% src=./img/server-auth.png&gt;</p>

<h3 id="문제점">문제점</h3>
<p><strong>세션(session)</strong></p>
<blockquote>
  <p>로그인 중인 사용자가 늘어날 경우에는 서버의 RAM에 부하가 걸리게 된다</p>
</blockquote>

<p><strong>확장성</strong></p>
<blockquote>
  <p>사용자가 늘어나게 되면 더 많은 트래픽을 처리하기 위해 여러 프로세스를 돌리거나 컴퓨터를 추가하는 등 서버를 확장해야한다.<br />
세션을 사용한다면 세션을 분산시키는 시스템을 설계해야 하지만 이러한 과정은 매우 어렵고 복잡한다.</p>
</blockquote>

<p><strong>CORS(Cross-Origin Resource Sharing)</strong></p>
<blockquote>
  <p>웹 어플리케이션에서 세션을 관리할 때 자주 사용되는 쿠키는 단일 도메인 및 서브 도메인에서만 작동하도록 설계되어 있다. 따라서 쿠키를 여러 도메인에서 관리하는 것은 번거롭다.</p>
</blockquote>

<p>이러한 문제들을 때문에 token 기반의 인증 시스템을 사용한다.</p>

<h2 id="토큰-기반의-인증-시스템">토큰 기반의 인증 시스템</h2>
<p>: 인증받은 사용자들에게 토큰을 발급하고, 서버에 요청을 할 때 헤더에 토큰을 함께 보내도록 하여 유효성 검사를한다.</p>

<h3 id="동작-과정">동작 과정</h3>
<p>&lt;img width=40% src=./img/token-auth.png&gt;</p>

<ol>
  <li>사용자가 로그인을 한다</li>
  <li>서버 측에서 해당 정보검증한다.</li>
  <li>정보가 정확하다면 서버 측에서 사용자에게 Signed 토큰 발급
    <blockquote>
      <p>signed는 해당 토큰이 서버에서 정상적으로 발급된 토큰임을 증명하는 Signature를 가지고 있다는 것</p>
    </blockquote>
  </li>
  <li>클라이언트 측에서 전달받은 토큰을 저장해두고, 서버에 요청을 할 때마다 해당 토큰을 서버에 함께 전달한다. 이때 Http 요청 헤더에 토큰을 포함시킨다.</li>
  <li>서버는 토큰을 검증하고, 요청에 응답한다.</li>
</ol>

<h3 id="장점">장점</h3>
<ul>
  <li><strong>무상태성(Stateless) &amp; 확장성(Scalability)</strong>
    <blockquote>
      <p>토큰은 클라이언트 측에 저장되기 때문에 서버는 완전히 Stateless하며, 클라이언트와 서버의 연결고리가 없기 때문에 확장하기에 매우 적합하다.</p>
    </blockquote>
  </li>
  <li><strong>보안성</strong>
    <blockquote>
      <p>쿠키 사용에 의한 취약점이 사라지게된다.</p>
    </blockquote>
  </li>
  <li>
    <dl>
      <dt><strong>확장성(Extensibility)</strong></dt>
      <dd>시스템의 확장성을 의미하는 Scalability와 달리 Extensibility는 로그인 정보가 사용되는 분야의 확정을 의미
        <blockquote>
          <p>토큰 기반의 인증 시스템에서는 토큰에 선택적인 권한만 부여하여 발급할 수 있으며 OAuth의 경우 Facebook, Google 등과 같은 소셜 계정을 이용하여 다른 웹서비스에서도 로그인을 할 수 있다.</p>
        </blockquote>
      </dd>
    </dl>
  </li>
  <li><strong>여러 플랫폼 및 도메인</strong>
    <blockquote>
      <p>서버 기반 인증 시스템의 CORS 해결가능</p>
    </blockquote>
  </li>
</ul>

    </div>
    
    <footer class="post-footer">
        <div class="post-navigation">
            
            <div class="nav-previous">
                <span class="nav-label">이전 글</span>
                <a href="/algorithm/2022/03/17/%EB%8F%99%EC%A0%81-%EA%B3%84%ED%9A%8D%EB%B2%95%EA%B3%BC-%EB%B6%84%ED%95%A0-%EC%A0%95%EB%B3%B5-dynamic-programming-divide/" class="nav-link">동적 계획법과 분할 정복 - Dynamic Programming & Divide</a>
            </div>
            
            
            
            <div class="nav-next">
                <span class="nav-label">다음 글</span>
                <a href="/programming/2022/03/17/%EC%86%8C%ED%94%84%ED%8A%B8%EC%9B%A8%EC%96%B4-%EA%B0%9C%EB%B0%9C%EC%9D%98-3%EA%B0%9C%EC%9D%98-key%EC%9B%90%EC%B9%99/" class="nav-link">소프트웨어 개발의 3개의 KEY원칙</a>
            </div>
            
        </div>
    </footer>
</article>

        </main>
    </div>

    <!-- Prism.js JavaScript 로드 (순서 중요!) -->
    <script src="/assets/js/prism/prism.min.js"></script>
    <script src="/assets/js/prism/prism-autoloader.min.js"></script>
    <script src="/assets/js/prism/prism-toolbar.min.js"></script>
    <script src="/assets/js/prism/prism-copy-to-clipboard.min.js"></script>
    <script src="/assets/js/prism/prism-show-language.min.js"></script>
    <script src="/assets/js/prism/prism-line-numbers.min.js"></script>

    <!-- Prism.js 초기화 스크립트 -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // autoloader 경로 설정 (로컬 컴포넌트 사용)
            if (Prism.plugins && Prism.plugins.autoloader) {
                Prism.plugins.autoloader.languages_path = '/assets/js/prism/components/';
                console.log('Prism autoloader configured with local path:', Prism.plugins.autoloader.languages_path);
            }
            
            // 모든 pre 태그에 toolbar와 line-numbers 클래스 추가
            document.querySelectorAll('pre[class*="language-"]').forEach(function(pre) {
                pre.classList.add('line-numbers');
            });
            
            // Prism 하이라이팅 재실행
            Prism.highlightAll();
        });
    </script>
    
    <!-- Command Palette (Ninja Keys) -->
    <script src="/assets/js/command-palette.js"></script>
    
    <!-- Category Sidebar Web Component -->
    <script src="/assets/js/category-sidebar.js"></script>
    
    <!-- Post Metadata Web Component -->
    <script src="/assets/js/post-metadata.js"></script>
</body>
</html>
