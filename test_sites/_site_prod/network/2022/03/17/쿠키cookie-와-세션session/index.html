<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>쿠키(cookie) 와 세션(session)</title><link rel="stylesheet" href="/assets/css/prism/prism-material-theme.css"><link rel="stylesheet" href="/assets/css/prism/prism-toolbar.min.css"><link rel="stylesheet" href="/assets/css/prism/prism-line-numbers.min.css"><link rel="stylesheet" href="/assets/css/style.css"><script type="module" src="https://unpkg.com/ninja-keys?module"></script></head><body><div class="container"><header><h1><a href="/">My Tech Blog</a></h1><nav><ul><li><a href="/">Home</a></li></ul></nav></header><main><article class="post"><header class="post-header"><h1 class="post-title">쿠키(cookie) 와 세션(session)</h1><post-metadata layout="inline" categories='["network"]' tags='["web","TIL"]' date="March 17, 2022" reading-time="2" compact="false"></post-metadata><div class="post-author"><span class="author-label">작성자:</span> <span class="author-name">jeongcool</span></div></header><div class="post-content"><h1 id="쿠키cookie-와-세션session">쿠키(cookie) 와 세션(session)</h1><h3 id="쿠키cookie와-세션session을-사용하는-이유">쿠키(Cookie)와 세션(Session)을 사용하는 이유</h3><ul><li>HTTP 프로토콜은 <strong>Connectionless(비연결성)</strong> 과 <strong>Stateless(비상태성)</strong> 라는 특징을 가지고 있다.</li><li>모든 사용자의 요청마다 연결과 해제의 과정을 거치면서 연결상태를 유지하지 않고 연결 헤제 후에도 상태 정보를 저장하지 않기 떄문에 <strong>서버의 자원을 크게 절약할 수 있다.</strong></li><li>하지만 <strong>HTTP 프로토콜 만으로 자동로그인, 로그인 상태 유지등 이러한 기능들을 사용할 수 가 없다</strong></li></ul><p><strong>이러한 <u>HTTP Connectionless, Stateless 의 특성들을 보완한 기술이 쿠키, 세션 이다.</u></strong></p><h2 id="쿠키cookie">쿠키(cookie)</h2><p>: 쿠키는 서버가 사용자의 웹 브라우저에 저장하는 데이터이다.</p><blockquote><p>쿠키의 데이터 형태는 Key 와 Value로 구성되고 String으로만 이루어져 있고 4KB 이상 저장할 수는 없다.</p><ul><li>Cookie를 이용한 Server-Client 흐름</li></ul></blockquote><p><img width="450px" src="/assets/images/posts/network/cookie-server-client.png"></p><h3 id="배경">배경</h3><ul><li><strong>클라이언트가 정보를 유지하는 Stateful 한 성격의 서비스가 점점 많아짐</strong><br>(로그인을 통해 볼 수 있는 서비스, 장바구니 서비스 등)</li><li><strong>정보를 유지할 수 없는 Connectionless, Statelses의 성격을 가진 HTTP의 단점을 해결하기 위해</strong> 쿠키라는 개념이 도입됨<h3 id="사용-목적">사용 목적</h3><ol><li><strong>세션 관리(Session Management)</strong><blockquote><p><strong>로그인, 사용자 닉네임 등 서버가 알아야할 정보들을 저장</strong></p></blockquote></li><li><strong>개인화(Personlization)</strong><blockquote><p><strong>사용자마다 다르게 그 사람에 적절한 페이지를 보여줄 수 있다.</strong></p></blockquote></li><li><strong>트래킹(Tracking)</strong><blockquote><p><strong>사용자의 행동과 패턴을 분석하고 기록</strong></p><h3 id="쿠키cookie-구성요소">쿠키(cookie) 구성요소</h3><p>|구성요소|설명| |——|—| |<code>name</code>|쿠키의 이름| |<code>value</code>|쿠키의 저장된 값| |<code>expires</code>|쿠키가 언제 삭제되는지 결정| |<code>domain</code>|쿠키가 사용되는 도매인을 가짐| |<code>path</code>|쿠키를 반환할 경로를 결정| |<code>secure</code>|보안 연결 설정| |<code>httpOnly</code>|Http외에 다른 통신 사용가능설정|</p></blockquote></li></ol></li></ul><h2 id="세션session">세션(Session)</h2><p>: 비밀번호와 같은 인증 정보를 쿠키에 저장하지 않고 대신에 사용자의 식별자인 <code>JSESSIONID(session id)</code> 를 저장한다.</p><blockquote><p>서버에는 인증 정보와 더불어 이 ID에 해당하는 로그인 상태, 마지막 로그인 시간, 닉네임, 만료기한 등의 정보를 저장한다.<br>보안상 서버는 사용자의 개인 컴퓨터보다는 훨씬 안전하기 때문에 인증에 Session을 이용한다.</p><h3 id="배경-1">배경</h3><p>쿠키의 트래픽 문제와 쿠키를 변경하는 보안적 이슈를 해결하기 위해 등장</p><h3 id="세션http-session">세션(HTTP Session)?</h3><ul><li><dl><dt><strong>server</strong></dt><dd>HTTP Session id를 식별자로 구별하여 데이터를 접속한 서버 DB에 정보를 저장(쿠키 형태x)</dd></dl></li><li><dl><dt><strong>client</strong></dt><dd>HTTP Session id를 쿠키로 메모리 저장된 형태로 가지고 있다.</dd></dl></li><li>메모리에 저장하기 떄문에 브라우저가 종료되면 사라짐<h3 id="세션http-session-절차">세션(HTTP Session) 절차</h3><p><img width="450px" src="/assets/images/posts/network/session-stream.png"></p></li></ul></blockquote><ol><li>Client가 서버에 Resource를 요청</li><li>서버에서 HTTP Request를 통해 쿠키에서 <code>Sessio-id</code>를 확인을 한 후 없으면 Set-Cookie를 통해 새로 발행할 <code>Session-id</code> 를 보냄</li><li>Client는 HTTP Request Header에 Session-id를 포함하여 원하는 Resource를 요청</li><li>Server는 Session-id를 통해 해당 session을 찾아 클라이언트 상태 정보를 유지하여 적절한 응답을 함</li></ol><h3 id="세션session의-특징">세션(Session의 특징)</h3><ul><li>Session-id는 브라우저 단위로 저장, 브라우저 종료시 소멸</li><li>각 Client에게 고유 ID를 부여(ex. 로그인한 유저, 로그아웃한 유저)</li><li>사용자가 많아질수록 서버 메모리를 많이 차지</li></ul><h3 id="쿠키와-세션의-차이">쿠키와 세션의 차이</h3><ul><li>쿠키와 세션은 비슷한 역활을 하며, 동작원리가 비슷하다.<blockquote><p>세션은 쿠키를 사용한다.</p></blockquote></li><li>사용자의 정보가 저장되는 위치<blockquote><p>쿠키는 local, 세션은 server에 정보가 저장된다.</p></blockquote></li><li>정보가 저장되는 위치로 인해 쿠키가 보안이 비교적 좋지않다.</li><li>세션은 server에서 처리를 해야 하므로 쿠키보다 느리다.</li><li>라이프 사이클<ul><li>쿠키: 만료되어도 local에 남을 수 있다.</li><li>세션: 만료시간 상관없이 브라우저 종료시 소멸</li></ul></li></ul></div><footer class="post-footer"><div class="post-navigation"><div class="nav-previous"><span class="nav-label">이전 글</span> <a href="/database/2022/03/17/%EC%A1%B0%EC%9D%B8-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98/" class="nav-link">조인 알고리즘</a></div><div class="nav-next"><span class="nav-label">다음 글</span> <a href="/cs/2022/03/19/adt-abstract-data-type/" class="nav-link">ADT - Abstract Data Type</a></div></div></footer></article></main></div><script src="/assets/js/prism/prism.min.js"></script><script src="/assets/js/prism/prism-autoloader.min.js"></script><script src="/assets/js/prism/prism-toolbar.min.js"></script><script src="/assets/js/prism/prism-copy-to-clipboard.min.js"></script><script src="/assets/js/prism/prism-show-language.min.js"></script><script src="/assets/js/prism/prism-line-numbers.min.js"></script><script>document.addEventListener("DOMContentLoaded",function(){Prism.plugins&&Prism.plugins.autoloader&&(Prism.plugins.autoloader.languages_path="/assets/js/prism/components/",console.log("Prism autoloader configured with local path:",Prism.plugins.autoloader.languages_path)),document.querySelectorAll('pre[class*="language-"]').forEach(function(s){s.classList.add("line-numbers")}),Prism.highlightAll()})</script><script src="/assets/js/command-palette.js"></script><script src="/assets/js/category-sidebar.js"></script><script src="/assets/js/post-metadata.js"></script></body></html>