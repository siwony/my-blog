<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>간단한 Spring Boot AWS Server 배포</title><link rel="stylesheet" href="/assets/css/prism/prism-material-theme.css"><link rel="stylesheet" href="/assets/css/prism/prism-toolbar.min.css"><link rel="stylesheet" href="/assets/css/prism/prism-line-numbers.min.css"><link rel="stylesheet" href="/assets/css/style.css"><script type="module" src="https://unpkg.com/ninja-keys?module"></script></head><body><div class="container"><header><h1><a href="/">My Tech Blog</a></h1><nav><ul><li><a href="/">Home</a></li></ul></nav></header><main><article class="post"><header class="post-header"><h1 class="post-title">간단한 Spring Boot AWS Server 배포</h1><post-metadata layout="inline" categories='["devops"]' tags='["aws","TIL"]' date="August 12, 2021" reading-time="2" compact="false"></post-metadata><div class="post-author"><span class="author-label">작성자:</span> <span class="author-name">jeongcool</span></div></header><div class="post-content"><h1 id="간단한-spring-boot-aws-server-배포">간단한 Spring Boot AWS Server 배포</h1><blockquote><p>이글은 EC2, AWS Linux, JAVA11, Maven, macOS 기준으로 설명할 글입니다.<br>그리고 간단한 협업, Test 를 위한 배포입니다.</p></blockquote><h3 id="자신의-mac-에서-aws-instance연결하기">자신의 MAC 에서 AWS instance연결하기</h3><ol><li>자신의 터미널에서 키페어가 있는 디렉토리로 이동 한다.</li><li>터미널에서 pair key의 권한을 변경<blockquote><p>key 이름은 <code>~.pem</code> 형식으로 되어있다</p><pre><code class="language-sh"> chmod 400 키이름.pem
</code></pre><p>유저가 읽기만가능하다는 권환으로 변경</p></blockquote></li><li>자신의 AWS instance 를 선택후 연결하기 를 누른다.</li><li>그후 SSH 클라이언트 텝에 있는 <code>예</code> 에 적어져있는 명령어를 터미널에 입력한다.<blockquote><p>필자의 key 이름은 <del>귀찮아서</del> <code>asdfasef</code> 로 했다.<br>&lt;img width=500 src=./img/SSH-Connect.png&gt;</p></blockquote></li><li>다음과 같이 뜨면 성공이다.<br>&lt;img width=500 src=./img/success.png&gt;</li></ol><h3 id="aws-linux-가상환경에서-배포-환경-구축하기">AWS Linux 가상환경에서 배포 환경 구축하기</h3><blockquote><p>필자는 openJDK 11 버전을 사용할 것이다.</p><ol><li>Git 설치<pre><code class="language-bash"> sudo yum install git
</code></pre></li><li>JAVA8 설치 및 JAVA 11 버전 적용(open JDK)<blockquote><p>JAVA11을 적용시키기 위해 먼저 JAVA8을 설치한다. <strong>JAVA8 install</strong></p><pre><code class="language-bash"> sudo yum install -y java-1.8.0-openjdk-devel.x86_64
 sudo yum install java-11-amazon-corretto-headless
</code></pre><p><strong>JAVA11 로 바꾸기</strong></p><pre><code class="language-bash"> sudo alternatives --config java
</code></pre><p>설치했던 java-11-amazon-corretto 버전을 선택한다.<br><img width="600" src="/assets/images/posts/devops/java-version-switch.png"></p></blockquote></li></ol></blockquote><ol><li>Apache Maven설치<pre><code class="language-bash"> sudo wget http://repos.fedorapeople.org/repos/dchen/apache-maven/epel-apache-maven.repo -O /etc/yum.repos.d/epel-apache-maven.repo
 sudo sed -i s/\$releasever/6/g /etc/yum.repos.d/epel-apache-maven.repo
 sudo yum install -y apache-maven
</code></pre></li></ol><h3 id="배포">배포</h3><ol><li>자신의 SpringBoot project 받아오기<br>ex)<pre><code class="language-bash"> mkdir app
 cd ./app
 git clone https://github.com/siwony/SpringBoot-MembershipAPI.git
</code></pre></li><li>쉘스크립트를 이용해 배포<br>vim 에디터로 쉘스크립트 작성<pre><code class="language-bash"> vim deploy.sh
</code></pre><p>bash shell script</p><pre><code class="language-bash"> #!/bin/bash
 # maven 프로젝트 폴더로 옮기기
 cd ./SpringBoot-MembershipAPI
    
 # 프로젝트의 변경사항이 없는지 확인
 echo "git pull"
 git pull
    
 # 프로젝트 컴파일
 echo "프로젝트 컴파일"
 mvn compile

 # 프로젝트 test
 echo "프로젝트 테스트"
 mvn test

 # jar 파일로 packaging
 echo "mvn package"
 mvn package
</code></pre></li></ol><h3 id="서버-시작">서버 시작</h3><ol><li>서버 실행 자신의 프로젝트 폴더의 target 으로 이동<pre><code class="language-bash"> cd SpringBoot-MembershipAPI/target/
</code></pre><p><code>mvn packge</code> 명령어로 만든 jar 파일 실행</p><pre><code class="language-bash"> java -jar 자신의jar파일
 #ex) java -jar membershipApi-0.0.1-SNAPSHOT.jar
</code></pre><p><strong>If BackGround 에서 실행하고 싶다면 <code>java -jar</code> 앞에 <code>nohub</code> 을 붙이고 명령어 끝에 &amp; 를 입력해야된다.</strong></p><pre><code class="language-bash"> nohup java -jar 자신의jar파일
 #ex)nohub java -jar membershipApi-0.0.1-SNAPSHOT.jar &amp;
</code></pre><p>로그 확인하기</p><pre><code class="language-bash"> cat nohub.out
</code></pre><p>curl 를 이용한 서버 동작여부 test</p><pre><code class="language-bash"> curl localhost:8080
</code></pre></li></ol></div><footer class="post-footer"><div class="post-navigation"><div class="nav-previous"><span class="nav-label">이전 글</span> <a href="/devops/2021/08/12/elastic-stack-elasticsearch-logstash-kibana-beat/" class="nav-link">Elastic Stack - Elasticsearch, Logstash, Kibana + Beats</a></div><div class="nav-next"><span class="nav-label">다음 글</span> <a href="/book/2021/08/24/01-%EC%86%8C%ED%94%84%ED%8A%B8%EC%9B%A8%EC%96%B4-%EA%B3%B5%ED%95%99-%EC%86%8C%EA%B0%9C/" class="nav-link">01. 소프트웨어 공학 소개</a></div></div></footer></article></main></div><script src="/assets/js/prism/prism.min.js"></script><script src="/assets/js/prism/prism-autoloader.min.js"></script><script src="/assets/js/prism/prism-toolbar.min.js"></script><script src="/assets/js/prism/prism-copy-to-clipboard.min.js"></script><script src="/assets/js/prism/prism-show-language.min.js"></script><script src="/assets/js/prism/prism-line-numbers.min.js"></script><script>document.addEventListener("DOMContentLoaded",function(){Prism.plugins&&Prism.plugins.autoloader&&(Prism.plugins.autoloader.languages_path="/assets/js/prism/components/",console.log("Prism autoloader configured with local path:",Prism.plugins.autoloader.languages_path)),document.querySelectorAll('pre[class*="language-"]').forEach(function(s){s.classList.add("line-numbers")}),Prism.highlightAll()})</script><script src="/assets/js/command-palette.js"></script><script src="/assets/js/category-sidebar.js"></script><script src="/assets/js/post-metadata.js"></script></body></html>