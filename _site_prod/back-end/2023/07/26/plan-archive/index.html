<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Plan Archive</title><link rel="stylesheet" href="/assets/css/prism/prism-material-theme.css"><link rel="stylesheet" href="/assets/css/prism/prism-toolbar.min.css"><link rel="stylesheet" href="/assets/css/prism/prism-line-numbers.min.css"><link rel="stylesheet" href="/assets/css/style.css"><script type="module" src="https://unpkg.com/ninja-keys?module"></script></head><body><div class="container"><header><h1><a href="/">My Tech Blog</a></h1><nav><ul><li><a href="/">Home</a></li></ul></nav></header><main><article class="post"><header class="post-header"><h1 class="post-title">Plan Archive</h1><post-metadata layout="inline" categories='["back-end"]' tags='["TIL","gradle","build-tool"]' date="July 26, 2023" reading-time="1" compact="false"></post-metadata><div class="post-author"><span class="author-label">작성자:</span> <span class="author-name">jeongcool</span></div></header><div class="post-content"><h1 id="plan-archive">Plan Archive</h1><ul><li><code>-plan</code> 이 붙은 jar 파일이며</li><li>에플리케이션 실행에 필요한 모든 의존성이 포함되지 않는 파일이며</li><li>소스코드와 리소스 파일만 포함된다.</li><li>이런 jar 파일을 thin.jar, standard.jar로 불리기도 한다.</li></ul><h2 id="springboot-애플리케이션에서-생성하지-않는-방법">SpringBoot 애플리케이션에서 생성하지 않는 방법</h2><ul><li>reference: https://docs.spring.io/spring-boot/docs/2.5.1/gradle-plugin/reference/htmlsingle/#packaging-executable.and-plain-archives</li></ul><p>Spring Boot 2.5.x 버전부터 build시 자동으로 생성된다 만약 생성을 원하지 않을 경우 classifier를 사용하거나</p><pre><code class="language-kotlin">tasks.getByName&lt;BootJar&gt;("bootJar") {
	classifier = "boot"
}

tasks.getByName&lt;Jar&gt;("jar") {
	classifier = ""
}
</code></pre><p>plan archive를 완전히 build하고 싶지 않을경우 아래와 같이 build.gradle.kts에 추가하면 된다.</p><pre><code class="language-kotlin">tasks.getByName&lt;Jar&gt;("jar") {
	enabled = false
}
</code></pre><h2 id="executable-jar">Executable-Jar</h2><p>반대로 Excutable Jar는 그 즉시 실행할 수 있는 jar 파일을 의미한다,</p><ul><li>애플리케이션 실행에 필요한 모든 의존성이 포함된다.</li></ul><h2 id="해당-글을-작성하는-이유">해당 글을 작성하는 이유</h2><p>토이프로젝트 진행 중 간단하게 AWS ec2환경에서 Github Action + code deploy 를 활용해서 ci/cd를 진행해야 하는 일이 있었다.<br>그 중 deploy하는 bash script를 작성하는데 빌드 디렉토리 하위에 <code>*.jar</code> 표현식을 가진 파일을 실행하라는 스크립트를 작성했었다.<br>그랬더니 plan jar 파일을 실행시켜 cd과정에서 실패했고 이 과정에서 궁금해서 쓰개 됨</p></div><footer class="post-footer"><div class="post-navigation"><div class="nav-previous"><span class="nav-label">이전 글</span> <a href="/book/2023/04/30/4-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EC%9B%90%EC%B9%99/" class="nav-link">4. 컴포넌트 원칙</a></div><div class="nav-next"><span class="nav-label">다음 글</span> <a href="/test/2024/01/01/test-post-1/" class="nav-link">Test Post 1</a></div></div></footer></article></main></div><script src="/assets/js/prism/prism.min.js"></script><script src="/assets/js/prism/prism-autoloader.min.js"></script><script src="/assets/js/prism/prism-toolbar.min.js"></script><script src="/assets/js/prism/prism-copy-to-clipboard.min.js"></script><script src="/assets/js/prism/prism-show-language.min.js"></script><script src="/assets/js/prism/prism-line-numbers.min.js"></script><script>document.addEventListener("DOMContentLoaded",function(){Prism.plugins&&Prism.plugins.autoloader&&(Prism.plugins.autoloader.languages_path="/assets/js/prism/components/",console.log("Prism autoloader configured with local path:",Prism.plugins.autoloader.languages_path)),document.querySelectorAll('pre[class*="language-"]').forEach(function(s){s.classList.add("line-numbers")}),Prism.highlightAll()})</script><script src="/assets/js/command-palette.js"></script><script src="/assets/js/category-sidebar.js"></script><script src="/assets/js/post-metadata.js"></script></body></html>