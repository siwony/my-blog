<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>CASCADE(영속성 전이)</title><link rel="stylesheet" href="/assets/css/prism/prism-material-theme.css"><link rel="stylesheet" href="/assets/css/prism/prism-toolbar.min.css"><link rel="stylesheet" href="/assets/css/prism/prism-line-numbers.min.css"><link rel="stylesheet" href="/assets/css/style.css"><script type="module" src="https://unpkg.com/ninja-keys?module"></script></head><body><div class="container"><header><h1><a href="/">My Tech Blog</a></h1><nav><ul><li><a href="/">Home</a></li></ul></nav></header><main><article class="post"><header class="post-header"><h1 class="post-title">CASCADE(영속성 전이)</h1><post-metadata layout="inline" categories='["back-end"]' tags='["spring","jpa","TIL"]' date="March 19, 2022" reading-time="1" compact="false"></post-metadata><div class="post-author"><span class="author-label">작성자:</span> <span class="author-name">jeongcool</span></div></header><div class="post-content"><h1 id="cascade영속성-전이">CASCADE(영속성 전이)</h1><p>: 특정 <code>Entity</code>가 상태 변화를 연관된 <code>Entity</code>에 전파시키는 옵션이다.</p><blockquote><p>예: 부모 엔티티를 저장할 때 자식 엔티티도 함께 저장.</p></blockquote><p>&lt;img width=450px src=./img/cascade.png&gt;</p><ul><li>단일 엔티티에 종속적일 때 사용한다. → 단일 소유자</li><li>엔티티 생명주기가 거의 유사할떄 사용한다.<h3 id="cascade-저장">CASCADE 저장</h3><p><code>@OneToMany(mappedBy="parent", cascade=CascadeType.PERSIST)</code><br>&lt;img width=450px src=./img/cascade-save.png&gt;</p></li></ul><h4 id="예시">예시</h4><p>부모 클래스</p><pre><code class="language-java">@Entity
public class Parent {
    @Id @GeneratedValue
    private Long id;

    private String name;

    @OneToMany(mappedBy=parent, casecade= CaseCadeType.ALL)
    private List&lt;Childe&gt; childList = new ArrayList&lt;&gt;();

    public void addChilde(Child Child){
        childList.add(child);
    }
}
</code></pre><p>자식 클래스</p><pre><code class="language-java">@Entity
public class Child {
    @Id @GeneratedValue
    private Long id;

    private String name;

    @ManyToOne
    @JoinColumn("parent_id")
    Parent parent;
</code></pre><p>결과</p><pre><code class="language-java">Child child1 = new Child();
Child child2 = new Child();

Parent parent = new Parent();
parent.addChild(child1);
parent.addChild(child2);

em.persist(parent) // 부모가 영속화 되면 자식도 같이 영속화 된다.
// em.persist(child1) caseCade로 인하여 부모와 함께 영속화 되어 안해도됌
// em.persist(child2)

</code></pre><h3 id="주의사항">주의사항</h3><ul><li>영속성 전이는 연관관계를 매핑하는 것과 아무 관련이 없다.</li><li>엔티티를 영속화할 때 연관된 엔티티도 함께 영속화 하는 것만 제공할뿐</li><li>자식의 소유자가 하나일 때만 사용하자. <code>ex) 게시판</code></li></ul><h3 id="종류">종류</h3><ul><li><strong>ALL : 모두 적용</strong></li><li><strong>PERSIST : 영속</strong></li><li><strong>REMOVE : 삭제</strong></li><li>MERGE : 병합</li><li>REFRESH : REFRESH</li><li>DETACH : DETACH</li></ul></div><footer class="post-footer"><div class="post-navigation"><div class="nav-previous"><span class="nav-label">이전 글</span> <a href="/back-end/2022/03/19/buildgradle-plugins-error/" class="nav-link">build.gradle plugins{} error</a></div><div class="nav-next"><span class="nav-label">다음 글</span> <a href="/back-end/2022/03/19/cors-%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0/" class="nav-link">CORS 문제 해결</a></div></div></footer></article></main></div><script src="/assets/js/prism/prism.min.js"></script><script src="/assets/js/prism/prism-autoloader.min.js"></script><script src="/assets/js/prism/prism-toolbar.min.js"></script><script src="/assets/js/prism/prism-copy-to-clipboard.min.js"></script><script src="/assets/js/prism/prism-show-language.min.js"></script><script src="/assets/js/prism/prism-line-numbers.min.js"></script><script>document.addEventListener("DOMContentLoaded",function(){Prism.plugins&&Prism.plugins.autoloader&&(Prism.plugins.autoloader.languages_path="/assets/js/prism/components/",console.log("Prism autoloader configured with local path:",Prism.plugins.autoloader.languages_path)),document.querySelectorAll('pre[class*="language-"]').forEach(function(s){s.classList.add("line-numbers")}),Prism.highlightAll()})</script><script src="/assets/js/command-palette.js"></script><script src="/assets/js/category-sidebar.js"></script><script src="/assets/js/post-metadata.js"></script></body></html>