<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>SpringBoot Maven to Gradle build tool migration!</title><link rel="stylesheet" href="/assets/css/prism/prism-material-theme.css"><link rel="stylesheet" href="/assets/css/prism/prism-toolbar.min.css"><link rel="stylesheet" href="/assets/css/prism/prism-line-numbers.min.css"><link rel="stylesheet" href="/assets/css/style.css"><script type="module" src="https://unpkg.com/ninja-keys?module"></script></head><body><div class="container"><header><h1><a href="/">My Tech Blog</a></h1><nav><ul><li><a href="/">Home</a></li></ul></nav></header><main><article class="post"><header class="post-header"><h1 class="post-title">SpringBoot Maven to Gradle build tool migration!</h1><post-metadata layout="inline" categories='["back-end"]' tags='["TIL","gradle","build-tool"]' date="March 19, 2022" reading-time="4" compact="false"></post-metadata><div class="post-author"><span class="author-label">작성자:</span> <span class="author-name">jeongcool</span></div></header><div class="post-content"><h1 id="springboot-maven-to-gradle-build-tool-migration">SpringBoot Maven to Gradle build tool migration!</h1><ul><li><a href="#springboot-maven-to-gradle-build-tool-migration">SpringBoot Maven to Gradle build tool migration!</a><ul><li><a href="#intro">Intro</a><ul><li><a href="#프로젝트-환경">프로젝트 환경</a></li><li><a href="#migration-동기">Migration 동기</a><ul><li><a href="#themoment-project">TheMoment Project</a></li><li><a href="#지속적-통합ci의-자료가-gradle이-더-많다">지속적 통합(CI)의 자료가 Gradle이 더 많다.</a></li></ul></li></ul></li><li><a href="#본론">본론</a><ul><li><a href="#maven-project에-gradle-project-적용하기">Maven Project에 Gradle Project 적용하기</a></li><li><a href="#의존성-migration">의존성 migration</a><ul><li><a href="#저장소-선언">저장소 선언</a></li></ul></li><li><a href="#intellij에서-gradle-project를-불러오자">Intellij에서 Gradle Project를 불러오자</a><ul><li><a href="#만약-intellij가-gradle을-불러오지-못한다면">만약 Intellij가 Gradle을 불러오지 못한다면</a></li></ul></li><li><a href="#나는-왜-에러가-뜨는걸까---gradle-lombok-error">나는 왜 에러가 뜨는걸까? - gradle lombok error</a><ul><li><a href="#문제해결">문제해결</a></li></ul></li></ul></li><li><a href="#후기">후기</a><ul><li><a href="#공식문서를보자">공식문서를보자</a></li><li><a href="#에러코드를-자세히-읽어보자">에러코드를 자세히 읽어보자</a><ul><li><a href="#마무리">마무리</a></li></ul></li></ul></li></ul></li></ul><h2 id="intro">Intro</h2><blockquote><p>SpringBoot 개발초기에는 Gradle이 무서운줄 알았다. 하지만 배포를 하다 보니까 Maven이 더 무섭더라.</p></blockquote><p>이글은 Gradle 공식문서를 아주많이 참고했습니다!</p><ul><li><a href="https://docs.gradle.org/current/userguide/migrating_from_maven.html#migmvn:multimodule_builds">Gradle 공식문서</a> - Apache Maven에서 빌드 마이그레이션</li></ul><h4 id="프로젝트-환경">프로젝트 환경</h4><ul><li>MacOS</li><li>Intellij Ultimate</li><li>Java11/SpringBoot + maven</li><li>그후 gradle 추가 예정</li></ul><blockquote><p><strong>주의</strong><br>자신의 프로젝트의 규모와 상황에따라 상황이 달라질 수 있습니다.</p></blockquote><h3 id="migration-동기">Migration 동기</h3><h4 id="themoment-project">TheMoment Project</h4><p>학교에 불편한순간 이라는 프로젝트가 있다. <a href="https://github.com/theMomentTeam/the_moment-Server">참고</a></p><ol><li>프로젝트를 하기전에 build tool 은 익숙한 maven을 선택했었다.</li><li>하지만 개발할때 익숙하고 편했지만 배포할때가 문제였다.</li></ol><h4 id="지속적-통합ci의-자료가-gradle이-더-많다">지속적 통합(CI)의 자료가 Gradle이 더 많다.</h4><blockquote><p>저희 프로젝트는 CI툴을 Jenkins를 사용하려고 합니다.</p></blockquote><p>우리 Project는 CI/CD를 통한 무중단 배포가 목표이다. 그러기 위해서는 CI가 필수관문인데<br>하지만 아무리 검색을 해도 maven을 통한 CI에대한 Jenkins배포를 찾을 수 없었다.</p><blockquote><p>아마 아직 개발 역량이 부족해서 일 수도 있지만 자료는 Gradle이 더 많았다.</p></blockquote><h2 id="본론">본론</h2><h3 id="maven-project에-gradle-project-적용하기">Maven Project에 Gradle Project 적용하기</h3><p>기존 Maven 프로젝트에서 Gradle Project를 시작하는것은 어렵지 않았다.</p><p>다음과같이 입력하면 Gradle Project를 시작할 수 있다.</p><pre><code class="language-bash">gradle init
</code></pre><p>Maven프로젝트 디렉토리에서 위와같이 입력했으면<br><code>Found a Maven build. Generate a Gradle build from this? (default: yes) [yes, no]</code><br>와 같은 메세지가 나온다 Enter 혹은 yes를 입력한다.</p><p>그후</p><pre><code class="language-sh">Select build script DSL:
  1: Groovy
  2: Kotlin
Enter selection (default: Groovy) [1..2]
</code></pre><p>이런식으로 build script를 선택하는것이 나올껀데 Groovy를 선택하자. (Enter or 1 입력)</p><blockquote><p>참고 : Groovy는 JVM기반에서 실행되는 스크립트 언어이다. Gralde에서 Build Script로 많이 쓰인다.</p></blockquote><p>그러면 Gradle이 알아서 pom.xml에 있는 depedency및 플러그인을 가져온다.</p><h3 id="의존성-migration">의존성 migration</h3><blockquote><p>Gradle의 의존성 관리 시스템은 Maven보다 유연하여<br>repository, 선언된 의존성, scope(Gradle의 의존성 구성) 및 의존성 전이의 동일한 개념을 계속 지원한다.</p></blockquote><h4 id="저장소-선언">저장소 선언</h4><p>Maven과 달리 Gradle은 기본 저장소가 없으므로 최소한 하나를 선언 해야한다.</p><blockquote><p>들어가봤자 라이브러리를 디렉토리명 및 파일을 나열해놔서 별 도움이 안된다.<br>굳이 라이브러리를 찾고싶으면 https://search.maven.org/ 여기에서 찾자</p></blockquote><p><code>Before</code></p><pre><code class="language-gradle">repositories {
    mavenLocal() //변경전 부분 // 의존성을 로컬에서 찾는다.
    maven {
        url = uri('https://repo.maven.apache.org/maven2/')
    }
}
</code></pre><p><code>After</code></p><pre><code class="language-gradle">repositories {
    mavenCentral() //변경된 부분 Maven Central로 의존성 저장소를 바꿈
    maven {
        url = uri('https://repo.maven.apache.org/maven2/')
    }
}
</code></pre><blockquote><p>Maven Central: 자바진영에서 개발의 필요한 의존성이 저장되어있는 저장소이다.</p></blockquote><h3 id="intellij에서-gradle-project를-불러오자">Intellij에서 Gradle Project를 불러오자</h3><blockquote><p>먼저 Gradle plugin이 설치가 되어있어야한다.</p></blockquote><p><code>gradle init</code>을 한후 gradle 프로젝트에 필요한 파일들이 프로젝트 폴더에 추가 되었으면,<br><code>Gradle build scripts found</code> 이 하단에 나타날것이다.</p><p>그후 <code>gradle build</code> 혹은 <code>./gradlew build</code> 를 입력해서 gradle project로 현제 프로젝트가 build되는지 확인하자.</p><p><strong>Build가 되면 바로 Gradle로 migration하면 되지만,</strong><br><strong>자신에 프로젝트에 어떤 side effect가 올지모르므로 검증후 점진적으로 적용하기 바란다.</strong></p><p><img src="/assets/images/posts/back-end/gradle-build-scripts-found.png"></p><p>그러면 Intellij에서 intellij 하게 gradle의 depedency를 불러올것이다.</p><h4 id="만약-intellij가-gradle을-불러오지-못한다면">만약 Intellij가 Gradle을 불러오지 못한다면</h4><p>자신의 프로젝트에 최상단에서 <code>.idea</code>를 제거하고 Intellij를 제실행하면 해결될것이다.</p><h3 id="나는-왜-에러가-뜨는걸까---gradle-lombok-error">나는 왜 에러가 뜨는걸까? - gradle lombok error</h3><p>나의 경우에는 compileJava FAILED가 떴다. 에러코드를 올려보니</p><pre><code class="language-sh">                                            etc...

  symbol: method getAdminPwd()
/{PROJECT_ROOT}/src/main/java/com/moment/the/dto/AdminDto.java:33: error: cannot find symbol
                .adminName(this.getAdminName())
                               ^
  symbol:   method setCode(int)
  location: variable result of type CommonResult
/{PROJECT_ROOT}/src/main/java/com/moment/the/domain/response/ResponseService.java:62: error: cannot find symbol
        result.setMsg(CommonResponse.FAIL.getMsg());
              ^
51 errors

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':compileJava'.
&gt; Compilation failed; see the compiler error output for details.

* Try:
Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.

* Get more help at https://help.gradle.org

BUILD FAILED in 1s
1 actionable task: 1 executed

</code></pre><p><code>getter</code>, <code>setter</code> 매서드를 찾을 수 없다는 에러가 51개나 떳다.<br>그러면 lombok이 method를 생성하지 않았다는건데?!</p><p>그후 바로 Gradle에 lombok을 적용하는것을 구글링했다. <del>사랑해요 Stack Overflow</del><br>참고 링크 : https://stackoverflow.com/questions/35236104/gradle-build-fails-on-lombok-annotated-classes</p><h4 id="문제해결">문제해결</h4><p>build.gradle 에 dependencies에 다음과같이 추가해주면 해결이된다.</p><pre><code class="language-gradle">dependencies{
  compileOnly 'org.projectlombok:lombok:1.18.16'
  annotationProcessor 'org.projectlombok:lombok:1.18.16'
}
</code></pre><p>버전명시는 자신의 프로젝트에 추가되어있는 lombok 버전과 똑같이 맞추자</p><p>그후 Build를 하여 성공했다!</p><pre><code class="language-sh">&gt; gradle build

BUILD SUCCESSFUL in 668ms
5 actionable tasks: 5 up-to-date
</code></pre><h2 id="후기">후기</h2><h3 id="공식문서를보자">공식문서를보자</h3><p>SpringBoot가 그래도 한국에 자료가 많아서 너무 구글링 및 블로그에 의존했던것 같다.<br>이번기회에 공식문서의 중요성을 알게되었다.</p><p>공식문서에는 기타 정보들도 많고 직접적으로 구글링해서 찾아야 할것을 알려준다.<br>다만 한국어가 아니여서 좀많이 아쉬운것같다.. 역시 영어공부를 해야겠다.</p><h3 id="에러코드를-자세히-읽어보자">에러코드를 자세히 읽어보자</h3><p>여기에서는 안나왔지만 Build Error를 해결하는 도중 에러 메세지를 재대로 안봤다 ㅜ..<br>왜냐하면 intellij에 있는 Terminal를 쓰고있는데(하단에 놓고 사용해서 위에가 가려진다..)<br>계속 빌드가 실패했다는 메시지만 보였고 가려진 진짜 에러부분을 볼 생각을 못했었다.(위에 에러메세지가 있는줄 몰랐다…)<br><del>진짜 이거 에러메세지 보고 현타가 엄청왔었다..</del></p><h4 id="마무리">마무리</h4><p>그래도 이번 기회에 gradle에 대한 생명주기 및 build tool에서 라이브러리를 어떻게 가져오는지에 대해 찾아볼 수 있어서 좋았다.<br>그리고 한층 성장한것같아 기분이 좋다.</p></div><footer class="post-footer"><div class="post-navigation"><div class="nav-previous"><span class="nav-label">이전 글</span> <a href="/back-end/2022/03/19/spring-%EA%B5%AC%EC%A1%B0dao-dto-entity-controller-service/" class="nav-link">Spring 구조(DAO, DTO, Entity, Controller, Service)</a></div><div class="nav-next"><span class="nav-label">다음 글</span> <a href="/back-end/2022/03/19/springboot/" class="nav-link">SpringBoot</a></div></div></footer></article></main></div><script src="/assets/js/prism/prism.min.js"></script><script src="/assets/js/prism/prism-autoloader.min.js"></script><script src="/assets/js/prism/prism-toolbar.min.js"></script><script src="/assets/js/prism/prism-copy-to-clipboard.min.js"></script><script src="/assets/js/prism/prism-show-language.min.js"></script><script src="/assets/js/prism/prism-line-numbers.min.js"></script><script>document.addEventListener("DOMContentLoaded",function(){Prism.plugins&&Prism.plugins.autoloader&&(Prism.plugins.autoloader.languages_path="/assets/js/prism/components/",console.log("Prism autoloader configured with local path:",Prism.plugins.autoloader.languages_path)),document.querySelectorAll('pre[class*="language-"]').forEach(function(s){s.classList.add("line-numbers")}),Prism.highlightAll()})</script><script src="/assets/js/command-palette.js"></script><script src="/assets/js/category-sidebar.js"></script><script src="/assets/js/post-metadata.js"></script></body></html>