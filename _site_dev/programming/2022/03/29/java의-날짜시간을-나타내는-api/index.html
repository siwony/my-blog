<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Java의 날짜/시간을 나타내는 API</title>
    
    <!-- Prism.js CSS 먼저 로드 -->
    <link rel="stylesheet" href="/assets/css/prism/prism-material-theme.css">
    <link rel="stylesheet" href="/assets/css/prism/prism-toolbar.min.css">
    <link rel="stylesheet" href="/assets/css/prism/prism-line-numbers.min.css">

    <!-- 사이트 CSS -->
    <link rel="stylesheet" href="/assets/css/style.css">

    <!-- Ninja Keys CSS -->
    <script type="module" src="https://unpkg.com/ninja-keys?module"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1><a href="/">My Tech Blog</a></h1>
            <nav>
                <ul>
                    <li><a href="/">Home</a></li>
                </ul>
            </nav>
        </header>

        <main>
            <article class="post">
    <header class="post-header">
        <h1 class="post-title">Java의 날짜/시간을 나타내는 API</h1>
        
        <!-- Enhanced metadata using post-metadata component -->
        <post-metadata 
          layout="inline"
          categories='["programming"]'
          tags='["TIL","coding","development","java","api","java8"]'
          date="March 29, 2022"
          reading-time="2"
          compact="false">
        </post-metadata>
        
        
        <div class="post-author">
          <span class="author-label">작성자:</span>
          <span class="author-name">jeongcool</span>
        </div>
        
    </header>

    <div class="post-content">
        <h1 id="java의-날짜시간을-나타내는-api">Java의 날짜/시간을 나타내는 API</h1>
<h2 id="java8-이전">Java8 이전</h2>
<blockquote>
  <p><code>Date</code>, <code>Calendar</code>, <code>SimpleDateFormet</code>등…</p>
  <h3 id="문제점">문제점</h3>
  <h4 id="1-객체명이-직관적이지-않다">1. 객체명이 직관적이지 않다.</h4>
  <p>Data객체가 날짜와 시간을 제공한다. → 객체명이 일관적이지 않다.</p>
  <pre><code class="language-java">Date date = new Date();
long time = date.getTime();
System.out.println(date); //날짜 출력 (ex. Sun Jun 21  15:32:35 PDT 2020)
System.out.println(time); // 1970년도를 지군으로 지금까지의 초를 나타낸다 (ex. 1938472839485)
</code></pre>
</blockquote>

<h4 id="2-mutable하다">2. mutable하다.</h4>
<blockquote>
  <p>서로 다른 여러 Threed에서 해당 Date객체를 모두 수정하게 된다면 예상치 못한 부수 효과가 일어날 것이다.
```java
Date date = new Date();
long time = date.getTime();
System.out.println(date); //출력 예시 - Sun Jun 21  15:32:32 PDT 2020</p>
</blockquote>

<p>Thread.sleep(1000 * 3) //3초동안 해당 threed는 대기한다.
Date after3Sec = new Date();
System.out.println(after3Sec) // 출력 예시 Sun Jun 21  15:35:35 PDT 2020 // 3초증가</p>

<p>after3Sec.setTime(time) // 3초 전 시간을 set함
System.out.println(after3Sec) // 출력 예시 Sun Jun 21  15:35:35 PDT 2020 // date변수와 시간이 똑같아 졌다.</p>
<pre><code>
#### 3. Type safety하지 않다.
```java
Calendar calendar = new GregorianCalendar(1802, -9, -15); // 무려 날짜에 음수가 들어갈 수 있다.(모든 수를 정수형 - int로 받음)
Date dateCalender = calendar.getTime(); // Date타입을 반환한다.
System.out.println(dateCalender); // 출력: Mon Mar 16 00:00:00 KST 1801

Calendar calendar = new GregorianCalendar(1802, 9, 15); 
System.out.println(calendar.getTime()); // 출력: Fri Oct 15 00:00:00 KST 1802 // 9월을 입력했지만 8월로 출력되었다.
</code></pre>

<h2 id="java8-이후">Java8 이후</h2>
<blockquote>
  <p>Instence, LocalData, LocalDateTime</p>
  <h4 id="지금-시간을-기계-시간으로-표현하는-방법">지금 시간을 기계 시간으로 표현하는 방법</h4>
  <ul>
    <li><code>Instant.now()</code>
현재 UTC (GMT)를 리턴한다. Universal Time Coordinated == Greenwich Mean Time</li>
  </ul>
</blockquote>

<p>예시</p>
<pre><code class="language-java">Instant now = Instant.now();
System.out.println(now); // 예시. 2021-08-31T14:26:51.212729Z
System.out.println(now.atZone(ZoneId.of("UTC"))); //예시. 2021-08-31T14:26:51.212729Z[UTC] 

ZonedDateTime zonedDateTime = now.atZone(ZoneId.systemDefault());
System.out.println(zonedDateTime); // 예시. 2021-08-31T23:26:51.212729+09:00[Asia/Seoul]
</code></pre>

<h4 id="인류용-시간을-표현하는-방법">인류용 시간을 표현하는 방법</h4>
<ul>
  <li><code>LocalDateTime.now()</code>
    <blockquote>
      <p>현재 시스템 Zone에 해당하는(로컬) 일시를 리턴한다.</p>
    </blockquote>
  </li>
  <li><code>LocalDateTime.of(int, Month, int, int, int, int)</code>
    <blockquote>
      <p>로컬의 특정 일시를 리턴한다.</p>
    </blockquote>
  </li>
  <li><code>ZonedDateTime.of(int, Month, int, int, int, int, ZoneId)</code>
    <blockquote>
      <p>특정 Zone의 특정 일시를 리턴한다.</p>
    </blockquote>
  </li>
</ul>

<h4 id="기간을-표현하는-방법">기간을 표현하는 방법</h4>
<blockquote>
  <p><code>Period</code> / <code>Duration.between()</code></p>
  <pre><code class="language-java">LocalDate today = LocalDate.now();
LocalDate nextYearBirthDay = LocalDate.of(2022, Month.APRIL, 22);
Period between = Period.between(today, nextYearBirthDay);
System.out.println("month: " + between.getMonths() + " day: "+between.getDays()); // 예시. month: 7 day: 22 (2021, 8, 31기준)
</code></pre>
</blockquote>

<h4 id="날짜-포멧팅">날짜 포멧팅</h4>
<ul>
  <li><code>DataTimeFormatter</code></li>
  <li><a href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#predefined">미리 정의한 포멧팅 참고</a>
    <pre><code class="language-java">DateTimeFormatter formatter = DateTimeFormatter.ofPattern("MM/d/yyyy");
LocalDate date = LocalDate.parse("07/15/1982", formatter);
//  LocalDate date = LocalDate.ISO_DATE_TIME; // 포메싱 예시
System.out.println(date); // 예시. 1982-07-15
System.out.println(today.format(formatter)); // 예시. 09/2/2021
</code></pre>
  </li>
</ul>

<h4 id="레거시-api-지원">레거시 API 지원</h4>
<ul>
  <li><code>GregorianCalendar</code>와 <code>Date</code> 타입의 인스턴스를 <code>Instant</code>나 <code>ZonedDateTime</code>으로 변환 가능.</li>
  <li><code>java.util.TimeZone</code>에서 <code>java.time.ZoneId</code>로 상호 변환 가능.
    <pre><code class="language-java">ZoneId newZoneAPI = TimeZone.getTimeZone("PST").toZoneId();
TimeZone legacyZoneAPI = TimeZone.getTimeZone(newZoneAPI);
Instant newInstant = new Date().toInstant();
Date legacyInstant = Date.from(newInstant);
</code></pre>
  </li>
</ul>

    </div>
    
    <footer class="post-footer">
        <div class="post-navigation">
            
            <div class="nav-previous">
                <span class="nav-label">이전 글</span>
                <a href="/programming/2022/03/29/java-version-%EB%B3%80%EA%B2%BD/" class="nav-link">Java version 변경</a>
            </div>
            
            
            
            <div class="nav-next">
                <span class="nav-label">다음 글</span>
                <a href="/programming/2022/03/29/jcf-java-collection-framework/" class="nav-link">JCF - Java Collection Framework</a>
            </div>
            
        </div>
    </footer>
</article>

        </main>
    </div>

    <!-- Prism.js JavaScript 로드 (순서 중요!) -->
    <script src="/assets/js/prism/prism.min.js"></script>
    <script src="/assets/js/prism/prism-autoloader.min.js"></script>
    <script src="/assets/js/prism/prism-toolbar.min.js"></script>
    <script src="/assets/js/prism/prism-copy-to-clipboard.min.js"></script>
    <script src="/assets/js/prism/prism-show-language.min.js"></script>
    <script src="/assets/js/prism/prism-line-numbers.min.js"></script>

    <!-- Prism.js 초기화 스크립트 -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // autoloader 경로 설정 (로컬 컴포넌트 사용)
            if (Prism.plugins && Prism.plugins.autoloader) {
                Prism.plugins.autoloader.languages_path = '/assets/js/prism/components/';
                console.log('Prism autoloader configured with local path:', Prism.plugins.autoloader.languages_path);
            }
            
            // 모든 pre 태그에 toolbar와 line-numbers 클래스 추가
            document.querySelectorAll('pre[class*="language-"]').forEach(function(pre) {
                pre.classList.add('line-numbers');
            });
            
            // Prism 하이라이팅 재실행
            Prism.highlightAll();
        });
    </script>
    
    <!-- Command Palette (Ninja Keys) -->
    <script src="/assets/js/command-palette.js"></script>
    
    <!-- Category Sidebar Web Component -->
    <script src="/assets/js/category-sidebar.js"></script>
    
    <!-- Post Metadata Web Component -->
    <script src="/assets/js/post-metadata.js"></script>
</body>
</html>
