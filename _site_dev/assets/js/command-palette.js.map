{"version":3,"names":[],"mappings":"","sources":["command-palette.js"],"sourcesContent":["/**\n * Command Palette Implementation using Ninja Keys\n * Provides search functionality for blog posts with Cmd+K shortcut\n */\n\nclass CommandPalette {\n  constructor() {\n    this.searchData = [];\n    this.ninja = null;\n    this.init();\n  }\n\n  async init() {\n    await this.loadSearchData();\n    this.setupNinjaKeys();\n    this.setupKeyboardShortcuts();\n  }\n\n  async loadSearchData() {\n    try {\n      const response = await fetch('/assets/js/search-data.json');\n      this.searchData = await response.json();\n      console.log('Search data loaded:', this.searchData.length, 'posts');\n    } catch (error) {\n      console.error('Failed to load search data:', error);\n      this.searchData = [];\n    }\n  }\n\n  setupNinjaKeys() {\n    // Create ninja-keys element\n    this.ninja = document.createElement('ninja-keys');\n    \n    // Configure ninja-keys\n    this.ninja.placeholder = 'Search posts...';\n    this.ninja.disableHotkeys = false;\n    this.ninja.hideBreadcrumbs = true;\n    \n    // Set hotkeys\n    this.ninja.hotKeys = 'cmd+k,ctrl+k';\n    \n    // Apply custom styles to ensure visibility\n    this.ninja.style.setProperty('--ninja-z-index', '10000');\n    this.ninja.style.setProperty('--ninja-backdrop-filter', 'blur(16px)');\n    this.ninja.style.setProperty('--ninja-overflow', 'hidden');\n    \n    // Ensure proper text colors\n    this.ninja.style.setProperty('--ninja-text-color', '#1f2937');\n    this.ninja.style.setProperty('--ninja-secondary-text-color', '#6b7280');\n    this.ninja.style.setProperty('--ninja-selected-text-color', '#ffffff');\n    \n    // Enhanced modal styling\n    this.ninja.style.setProperty('--ninja-modal-background', 'rgba(255, 255, 255, 0.98)');\n    this.ninja.style.setProperty('--ninja-modal-border', '1px solid rgba(0, 0, 0, 0.1)');\n    \n    // Append to body\n    document.body.appendChild(this.ninja);\n    \n    this.updateNinjaData();\n  }\n\n  updateNinjaData() {\n    if (!this.ninja) return;\n\n    const ninjaActions = this.searchData.map(post => {\n      // Create comprehensive keywords for better search\n      const tags = Array.isArray(post.tags) ? post.tags.join(' ') : '';\n      const keywords = [\n        post.title,\n        post.category,\n        post.excerpt,\n        tags,\n        // Add Korean and English terms for better search\n        this.generateSearchTerms(post.title),\n        this.generateSearchTerms(post.excerpt)\n      ].filter(Boolean).join(' ').toLowerCase();\n\n      return {\n        id: `post-${post.url}`,\n        title: post.title,\n        subtitle: `${post.category} â€¢ ${this.formatDate(post.date)}${tags ? ` â€¢ ${tags}` : ''}`,\n        section: this.formatCategory(post.category),\n        keywords: keywords,\n        handler: () => {\n          window.location.href = post.url;\n        }\n      };\n    });\n\n    // Add some default actions\n    const defaultActions = [\n      {\n        id: 'home',\n        title: 'Home',\n        subtitle: 'Go to homepage',\n        section: 'Navigation',\n        keywords: 'home homepage main í™ˆ ë©”ì¸',\n        handler: () => {\n          window.location.href = '/';\n        }\n      },\n      {\n        id: 'blog',\n        title: 'All Posts',\n        subtitle: 'View all blog posts',\n        section: 'Navigation', \n        keywords: 'blog posts all articles ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ ê¸€ ì „ì²´',\n        handler: () => {\n          window.location.href = '/blog.html';\n        }\n      }\n    ];\n\n    this.ninja.data = [...defaultActions, ...ninjaActions];\n  }\n\n  generateSearchTerms(text) {\n    if (!text) return '';\n    \n    // Extract meaningful terms from text\n    const terms = text\n      .replace(/[^\\w\\sê°€-íž£]/g, ' ') // Remove special characters except Korean\n      .split(/\\s+/)\n      .filter(term => term.length > 1) // Filter out single characters\n      .slice(0, 10); // Limit to first 10 terms to avoid too long keywords\n    \n    return terms.join(' ');\n  }\n\n  setupKeyboardShortcuts() {\n    document.addEventListener('keydown', (e) => {\n      // Handle Cmd+K or Ctrl+K\n      if ((e.metaKey || e.ctrlKey) && e.key === 'k') {\n        e.preventDefault();\n        this.open();\n      }\n      \n      // Handle Escape key\n      if (e.key === 'Escape') {\n        this.close();\n      }\n    });\n  }\n\n  open() {\n    if (this.ninja) {\n      this.ninja.open();\n    }\n  }\n\n  close() {\n    if (this.ninja) {\n      this.ninja.close();\n    }\n  }\n\n  formatDate(dateString) {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('ko-KR', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  }\n\n  formatCategory(category) {\n    const categoryMap = {\n      'programming': 'ðŸ’» Programming',\n      'general': 'ðŸ“ General',\n      'test': 'ðŸ§ª Test',\n      'tutorial': 'ðŸ“š Tutorial',\n      'review': 'â­ Review',\n      'thoughts': 'ðŸ’­ Thoughts',\n      'database': 'ðŸ—„ï¸ Database',\n      'devops': 'âš™ï¸ DevOps',\n      'algorithm': 'ðŸ§® Algorithm',\n      'java': 'â˜• Java',\n      'javascript': 'ðŸŸ¨ JavaScript',\n      'python': 'ðŸ Python',\n      'css': 'ðŸŽ¨ CSS',\n      'html': 'ðŸŒ HTML',\n      'docker': 'ðŸ³ Docker',\n      'aws': 'â˜ï¸ AWS',\n      'git': 'ðŸ“‹ Git',\n      'spring': 'ðŸƒ Spring',\n      'mysql': 'ðŸ¬ MySQL',\n      'linux': 'ðŸ§ Linux',\n      'network': 'ðŸŒ Network',\n      'security': 'ðŸ”’ Security',\n      'react': 'âš›ï¸ React',\n      'vue': 'ðŸ’š Vue',\n      'node': 'ðŸŸ¢ Node.js'\n    };\n    \n    return categoryMap[category] || `ðŸ“‚ ${category.charAt(0).toUpperCase() + category.slice(1)}`;\n  }\n\n  // Public API for external access\n  refresh() {\n    this.loadSearchData().then(() => {\n      this.updateNinjaData();\n    });\n  }\n}\n\n// Initialize when DOM is loaded\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', () => {\n    window.commandPalette = new CommandPalette();\n  });\n} else {\n  window.commandPalette = new CommandPalette();\n}\n\n// Add search hint to the page\nfunction addSearchHint() {\n  const hint = document.createElement('div');\n  hint.innerHTML = `\n    <div style=\"\n      position: fixed;\n      bottom: 20px;\n      right: 20px;\n      background: rgba(0, 0, 0, 0.8);\n      color: white;\n      padding: 8px 12px;\n      border-radius: 6px;\n      font-size: 12px;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n      backdrop-filter: blur(10px);\n      z-index: 1000;\n      opacity: 0.7;\n      transition: opacity 0.2s;\n    \" onmouseover=\"this.style.opacity='1'\" onmouseout=\"this.style.opacity='0.7'\">\n      Press <kbd style=\"\n        background: rgba(255, 255, 255, 0.2);\n        padding: 2px 6px;\n        border-radius: 3px;\n        font-size: 11px;\n      \">âŒ˜ K</kbd> to search\n    </div>\n  `;\n  \n  document.body.appendChild(hint);\n  \n  // Hide hint after 5 seconds\n  setTimeout(() => {\n    hint.style.opacity = '0';\n    setTimeout(() => hint.remove(), 200);\n  }, 5000);\n}\n\n// Show hint on page load\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', addSearchHint);\n} else {\n  addSearchHint();\n}"],"file":"command-palette.js"}