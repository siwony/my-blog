ğŸ“¦ Jekyll Static Website Deployment with Caddy (Docker Compose)
ğŸ§© Overview

This setup serves a Jekyll static website through Caddy using Docker Compose.
Caddy automatically provisions HTTPS certificates via Let's Encrypt using the TLS-ALPN-01 challenge, even without port 80 access.

Key Features:

Zero manual HTTPS setup (auto-managed by Caddy)

No need for port 80 (TLS-ALPN-01 challenge mode)

Lightweight and production-ready

Suitable for dynamic IP environments (with DDNS support)

ğŸ—‚ï¸ Project Structure
project-root/
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ Caddyfile
â””â”€â”€ _site/              # Jekyll build output


âš™ï¸ _site/ is generated by running jekyll build -d ./_site

âš™ï¸ docker-compose.yml
version: "3.9"

services:
  web:
    image: caddy:latest
    container_name: jekyll-caddy
    restart: unless-stopped
    ports:
      - "8443:443"       # External port â†’ internal HTTPS
    volumes:
      - ./_site:/srv:ro
      - ./Caddyfile:/etc/caddy/Caddyfile:ro
      - caddy_data:/data
      - caddy_config:/config
    environment:
      - TZ=Asia/Seoul

volumes:
  caddy_data:
  caddy_config:

ğŸ“ Caddyfile
yourdomain.com:443 {
    root * /srv
    file_server

    # Auto HTTPS via Let's Encrypt (TLS-ALPN-01)
    tls {
        issuer acme {
            email your-email@example.com
        }
    }

    # Optional: compress static assets
    encode gzip zstd
}


Replace yourdomain.com and your-email@example.com with actual values.
TLS-ALPN-01 challenge automatically works on port 443 â€” no port 80 required.

ğŸ” Namecheap & DDNS Integration (Optional but Recommended)

If your external IP changes frequently:

Enable Dynamic DNS in Namecheap

Go to Domain List â†’ Manage â†’ Advanced DNS â†’ Dynamic DNS â†’ ON

Copy your Dynamic DNS Password

Use a DDNS client (e.g., ddclient) on your host:

sudo apt install ddclient
sudo nano /etc/ddclient.conf

protocol=namecheap
ssl=yes
server=dynamicdns.park-your-domain.com
login=yourdomain.com
password='your-ddns-password'
@


Test it:

sudo ddclient -daemon=0 -verbose

ğŸ”„ Jekyll Build & Deployment Workflow
1. Build Jekyll site
jekyll build -d ./_site

2. Launch the stack
docker compose up -d

3. Verify HTTPS

Visit:
ğŸ‘‰ https://yourdomain.com:8443

If all is well, youâ€™ll see your Jekyll site served securely via Caddy.

ğŸ§° Maintenance

Renew certificates: Caddy auto-renews them â€” no manual certbot needed.

Update content:

jekyll build -d ./_site
docker compose restart web


Check logs:

docker logs -f jekyll-caddy

ğŸ›¡ï¸ Troubleshooting
Issue	Cause	Solution
TLS handshake timeout	Port 8443 not forwarded	Forward external 8443 â†’ internal 443
invalid cert	wrong domain or DNS	Verify DDNS sync or Namecheap record
Caddy not serving site	_site missing	Run jekyll build again
âœ… Summary
Component	Role
Caddy	Web server + HTTPS via TLS-ALPN-01
Docker Compose	Deployment orchestration
Namecheap DDNS	Keeps domain pointing to your dynamic IP
Jekyll	Static site generator